<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>หมากหนีบออนไลน์</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="head-title">
            <h1>หมากหนีบออนไลน์</h1>
        </div>
        <div class="body-content">
            <div class="left-column">
                <div class="lobby-block">
                    <h2>Game Lobby</h2>
                    <button id="new-room-btn">New Room</button>
                </div>
                <div class="lis-block" id="game-list"></div>
            </div>
            <div class="rigt-column">
                <div class="My-user-block">
                    <p>My User Id :</p>
                    <div id="my-user-id"></div>
                </div>
                <div class="online-player" id="online-player"></div>
            </div>
        
        </div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io()

        socket.emit('req-user-id')
        socket.emit('req-online-users')

        socket.on('res-user-id',(userID)=>{
            document.getElementById('my-user-id').innerText = userID
        })

        document.getElementById('new-room-btn').addEventListener('click',()=>{
            socket.emit('new-room')
        });

        socket.on('acess-room',()=>{
            window.location.href = `/gameRoom.html`
        });

        socket.on('res-online-users',(users)=>{
       
        });

        socket.on('res-online-users', (users) => {
            const onlinePlayerDiv = document.getElementById('online-player');
            onlinePlayerDiv.innerHTML = ''; // Clear the current list
            users.forEach(user => {
                const userElement = document.createElement('p');
                userElement.innerText = user;
                onlinePlayerDiv.appendChild(userElement);
            });
        });
                
    </script>
</body>
</html>